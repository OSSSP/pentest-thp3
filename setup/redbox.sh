#!/bin/bash

# Set up an ubuntu box to attack with

# Create Ubuntu box
gcloud compute instances create redbox --can-ip-forward --image https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/images/ubuntu-1804-bionic-v20191113
gcloud compute ssh root@redbox

# *** Note: Need some disk space for these tools

# Pentest Framework
apt-get update
git clone https://github.com/trustedsec/ptf /opt/ptf
cd /opt/ptf && .ptf
use modules/exploitation/install_update_all
use modules/intelligence-gathering/install_update_all
use modules/post-exploitation/install_update_all
use modules/powershell/install_update_all

use modules/vulnerability-analysis/install_update_all
cd /pentest

# Install Powershell (pg 15)
apt-get install libunwind8
wget http://security.debian.org/debian-security/pool/updates/main/o/openssl/libssl1.0.0_1.01t-1+deb7u3+amd64.deb
dpkg -i ^^^^
wget http://security.ubuntu.com/ubuntu/pool/main/i/icu/libicu55_55.1-7ubuntu0.3_amd64.deb
dpkg -i ^^^^
weget https://github.com/PowerShell/PowerShell/releases/download/v6.0.2/powershell_6.0.2-1.ubuntu.16.04_amd64.deb
dpkg -i ^^^^


# dnscat (pg 17)
apt-get install ruby-dev
gem install bundler
git clone https://github.com/iagox86/dnscat2.git
cd dnscat2/server
apt-get install gcc make
bundle install
./dnscat2.rb
# *** Note: Allow UDP 53

# More shells on pg 21
